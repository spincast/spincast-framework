{#==========================================
Spincast Properties File Config
==========================================#}
{% extends "../../layout.html" %}

{% block sectionClasses %}plugins plugins-spincast-validation{% endblock %}
{% block meta_title %}Plugins - Spincast Validation{% endblock %}
{% block meta_description %}Validation for your beans/models.{% endblock %}

{% block scripts %}
<script>

    {#==========================================
    Initialize the Table Of Content
    ==========================================#}
    $(function() {
        app.toc(230);
    });

</script>
{% endblock %}

{% block body %}

<div class="container pluginDoc">

    <ol class="breadcrumb">
        <li><span class="glyphicon glyphicon-menu-right"> </span> <a href="/plugins">Plugins</a></li>
        <li class="active">Spincast Validation plugin</li>
    </ol>
    
    <div id="sectionTitle" class="row"> 
        <div class="col-xs-12">
            <a href="#top"><h2 class="shortTop shortBottom"> Spincast Validation <span>plugin</span></h2></a>
            <div class="pluginBadges">
                <div class="pluginBadgeJavadoc hint--bottom-left hint--bounce" 
                     data-hint="Plugin's Javadoc"><span class="glyphicon glyphicon-pencil"></span> 
                     <a href="/public/javadoc/index.html?org/spincast/plugins/validation/package-summary.html">Javadoc</a>
                </div>
            </div> 
        </div>
    </div>
    
    <div id="sectionTitleFixed" class="row"> 
        <div class="col-xs-12">
            <a href="#top"><h2 class="shortTop"><img src="/public/images/logo_xsmall.png" /> Spincast Validation <span>plugin</span></h2></a>
        </div>
    </div>

    <div class="row">
        <nav id="toc" class="longTitle col-md-3">
            <ul class="nav nav-stacked">
                <li class="openable"><a href="#top">Overview</a></li>
                <li class="openable"><a href="#installation">Installation</a></li>
                <li class="openable"><a href="#usage">Usage</a></li>
                <li class="openable"><a href="#base_methods">The base methods</a></li>
                <li class="openable"><a href="#default_validation_methods">The default validation methods</a></li>
                <li class="openable"><a href="#custom_validation">Custom validation</a></li>
            </ul>
        </nav>
        
        <div id="toc-content" class="col-md-9">
        
            <section id="overview">
            
                <h3>
                    <a class="anchor" href="#overview" title="permanent link"></a>
                    Overview
                </h3>
	            <p>
	                This plugin provides classes and patterns to help validate your beans/models. 
                </p>
                <p>
                    The validation pattern this plugin promotes is <em>not</em> one using annotations 
                    (like <a href="http://hibernate.org/validator/">Hibernate's validator</a>, for example). 
                    It targets developers who don't like to pollute their
                    models with too many annotations.
                </p>
                <p>
                    By using this plugin and the <code>mix-ins</code>
                    provided by the <a href="/plugins/spincast-jackson-json">Spincast Jackson Json</a> plugin and
                    the <a href="/plugins/spincast-jackson-xml">Spincast Jackson XML</a> plugin, you can have models
                    which are not bloated with annotations, but that can still be (de)serialized (from/to <code>Json</code> 
                    and <code>XML</code>) and can still be validated properly.
                </p>
            </section>
            
	        <section id="installation">
                <h3>
                    <a class="anchor" href="#installation" title="permanent link"></a>
                    Installation
                </h3>              
                <p>
                    <i class="subIcon glyphicon glyphicon-share-alt"></i>
                    Add this artifact to your project:
                    <div>
                        <p>
                            <pre class="ace ace-xml"
>&lt;dependency&gt;
    &lt;groupId&gt;org.spincast&lt;/groupId&gt;
    &lt;artifactId&gt;spincast-plugins-validation&lt;/artifactId&gt;
    &lt;version&gt;{{spincastCurrrentVersion}}&lt;/version&gt;
&lt;/dependency&gt;</pre> 
                        </p>
                    </div>  
                </p>
                
                <p>
                    <i class="subIcon glyphicon glyphicon-share-alt"></i>
                    Then, install the plugin's Guice module, by passing it to the <code>Guice.createInjector(...)</code> method:
                    <div>
                        <p>
                            <pre class="ace ace-java" data-ace-hi="2,8,2,74"
>Injector guice = Guice.createInjector(
        new AppModule(args),
        new SpincastValidationPluginGuiceModule(IAppRequestContext.class)
        // other modules...
        );</pre> 
                        </p>
                    </div>   
                </p>
                <p>
                    ... or by using the <code>install(...)</code> method from your custom Guice module:
                    <div>
                        <p>
                            <pre class="ace ace-java" data-ace-hi="7,8,7,84"
>public class AppModule extends SpincastDefaultGuiceModule {

    //...

    @Override
    protected void configure() {
        super.configure();
        install(new SpincastValidationPluginGuiceModule(getRequestContextType()));
        // other modules...
    }
    
    // ...
}</pre> 
                        </p>
                    </div>   
                </p>
                <p>
                    <i class="subIcon glyphicon glyphicon-share-alt"></i>
                    When this is in place, you can create validator classes. 
                    For example, a <code>UserValidator</code>, to validate a user:
                </p>
                <p>
                    <div>
                        <p>
                            <pre class="ace ace-java"
>public class UserValidator extends SpincastValidatorBase&lt;IUser&gt; {
    //...
    @Override
    protected void validate() {
        // The validation rules go here.
    }
}</pre> 
                        </p>
                    </div>   
                </p>
                <p>
                    A validator extends the <code>SpincastValidatorBase</code> base class, and parameterizes it
                    with the type of the objects to validate. It overrides the <code>validate()</code>
                    method to define the validation rules. We'll see an example of this in the
                    following <a href="#usage">Usage</a> section.
                </p>
                <p>
                    <i class="subIcon glyphicon glyphicon-share-alt"></i>
                    You also have to bind a <a href="https://github.com/google/guice/wiki/AssistedInject"><code>assisted factory</code></a> for your new validator. 
                    A factory is required because
                    a validator is <em>stateful</em>, it keeps informations about the current object being 
                    validated. Therefore a validator can't be reused and a new instance must 
                    be created for each object to validate, using the factory.
                </p>
                <p>
                    <div>
                        <p>
                            <pre class="ace ace-java" data-ace-hi="12,8,12,91|13,42,13,97"
>public class AppModule extends SpincastDefaultGuiceModule {

    public AppModule(String[] mainArgs) {
        super(mainArgs);
    }

    @Override
    protected void configure() {
        super.configure();

        install(new SpincastValidationPluginGuiceModule(getRequestContextType()));

        install(new FactoryModuleBuilder().implement(IValidator.class, UserValidator.class)
                                          .build(new TypeLiteral&lt;IValidatorFactory&lt;IUser&gt;&gt;(){}));

        //...
    }

    //...
}</pre> 
                        </p>
                    </div>   
                </p>
                <p>
                    You can then inject the <code>IValidatorFactory&lt;IUser&gt;</code> where you need to
                    create validators for users. Let's see an example...
                </p>
                
            </section>
            
            <section id="usage">
                <h3>
                    <a class="anchor" href="#usage" title="permanent link"></a>
                    Usage
                </h3>
               
                <p>
                    In this example, we have a <code>UserController</code> controller containing a <code>addUser(...)</code> 
                    route handler that receives <code>POST</code> requests to add new users:
                    <div>
                        <p>
                            <pre class="ace ace-java"
>public class UserController implements IUserController {

    private final IUserService userService;

    @Inject
    public UserController(IUserService userService) {
        this.userService = userService;
    }

    protected IUserService getUserService() {
        return this.userService;
    }

    @Override
    public void addUser(IAppRequestContext context) {

        IUser user = context.request().getJsonBody(User.class);
        user = getUserService().addUser(user);
        
        context.response().sendJson(user);
    }
}</pre> 
                        </p>
                        <p>
                            <span class="explanation">Explanation :</span>
                            <ul>
                                <li>
                                    <span class="code-line-nbr">17</span> : We deserialize the body of a request we receive 
                                    to a <code>IUser</code> object. If the body is not valid <code>Json</code> or if the <code>Json</code>
                                    can't be properly deserialized to a <code>User</code> object, an exception is thrown.
                                </li>
                                <li>
                                    <span class="code-line-nbr">18</span> : We pass the new user to add to a 
                                    <code>IUserService</code> service. As we'll see, the validation of the user 
                                    object will be done there!
                                </li>
                                <li>
                                    <span class="code-line-nbr">20</span> : If the user is valid, and therefore saved in our system,
                                    we can return a new serialized version of it. This new version now contains 
                                    an unique <code>id</code> that our system attributed to the new user.
                                </li>
                            </ul>
                        </p>  
                    </div>   
                </p>
                
                <p>
                    <i class="subIcon glyphicon glyphicon-share-alt"></i>
                    Let's now have a look at the <code>IUserService</code> service, where the user object is validated:
                    <div>
                        <p>
                            <pre class="ace ace-java"
>public class UserService implements IUserService {

    private final IUserRepository userRepository;
    private final IValidatorFactory&lt;IUser&gt; userValidatorFactory;

    @Inject
    public UserService(IUserRepository userRepository,
                       IValidatorFactory&lt;IUser&gt; userValidatorFactory) {
        this.userRepository = userRepository;
        this.userValidatorFactory = userValidatorFactory;
    }

    protected IUserRepository getUserRepository() {
        return this.userRepository;
    }

    protected IValidatorFactory&lt;IUser&gt; getUserValidatorFactory() {
        return this.userValidatorFactory;
    }

    @Override
    public IUser addUser(IUser user) {

        IValidator userValidator = getUserValidatorFactory().create(user);
        if(!userValidator.isValid()) {

            String errorMessage = "The user contains errors:\n\n";
            errorMessage += userValidator.getErrorsFormatted(FormatType.PLAIN_TEXT);

            throw new PublicException(errorMessage);
        }

        return getUserRepository().addUser(user);
    }
}</pre> 
                        </p>
                        <p>
                            <span class="explanation">Explanation :</span>
                            <ul>
                                <li>
                                    <span class="code-line-nbr">8</span> : We inject the <code>IValidatorFactory&lt;IUser&gt;</code>
                                    factory, the object that creates user validators.
                                </li>
                                <li>
                                    <span class="code-line-nbr">24</span> : We create a validator instance, by passing as a parameter
                                    the <code>user</code> object that we want to validate.
                                </li>
                                <li>
                                    <span class="code-line-nbr">25</span> : By calling <code>userValidator.isValid()</code>, we
                                    can know if the validation was successful or not.
                                </li>
                                <li>
                                    <span class="code-line-nbr">27-28</span> : If some errors occured, we can access each error
                                    separately, but we can also ask the validator to give us a <em>formatted listing</em> of all the errors. 
                                    Here, we ask for a plain text listing, and we use it to build the message we're going to
                                    send in an exception.
                                </li>
                                <li>
                                    <span class="code-line-nbr">30</span> : By throwing a <code>PublicException</code> exception,
                                    the error message will be available to the end user. Which is desired, since we want to inform
                                    him of what went wrong.
                                </li>
                                <li>
                                    <span class="code-line-nbr">33</span> : In the other hand, if the validation is successful, 
                                    we add the user to our system! In general, a repository will add the new object to the
                                    appropriated data source, will set the generated <code>id</code> on the saved object and
                                    will return this updated object.
                                </li>
                                
                            </ul>
                        </p>  
                    </div>   
                </p>
                <p>
                    <i class="subIcon glyphicon glyphicon-share-alt"></i>
                    Here is what the validator itself would look like:
                    <div>
                        <p>
                            <pre class="ace ace-java"
>public class UserValidator extends SpincastValidatorBase&lt;IUser&gt; {

    @AssistedInject
    public UserValidator(@Assisted IUser user,
                         SpincastValidatorBaseDeps spincastValidatorBaseDeps) {
        super(user, spincastValidatorBaseDeps);
    }

    @Override
    protected void validate() {

        // The name of the user can't be null.
        validateNotNull("name", getObjToValidate().getName());

        // The password of the user should be at least 12 characters long.
        validateMinLength("password", getObjToValidate().getPassword(), 12);
        
        // A custom validation
        if("Stromgol".equalsIgnoreCase(getObjToValidate().getName())) {
            addError("name", 
                     "APP_USER_VALIDATION_ERROR_STROMGOL", 
                     "I know Stromgol very well and you are not him!");
        }
    }
}</pre> 
                        </p>
                        <p>
                            <span class="explanation">Explanation :</span>
                            <ul>
                                <li>
                                    <span class="code-line-nbr">9-10</span> : We override the abstract <code>validate()</code>
                                    method, which is where we declare the validation rules.
                                </li>
                                <li>
                                    <span class="code-line-nbr">13</span> : We validate that the user's <code>name</code> is 
                                    <em>not null</em>. Validation rules may use methods provided by the <code>SpincastValidatorBase</code>
                                    base class, like <code>validateNotNull(...)</code> in this case. Each of those validation rule 
                                    at least takes a <code>name</code> representing the field that
                                    is validated on the target object, and the value of the field. Also note that the
                                    <code>getObjToValidate()</code> method returns the object to validate (the <code>user</code> in
                                    this case).
                                </li>
                                <li>
                                    <span class="code-line-nbr">16</span> : We validate that the user's <code>password</code> contains
                                    at least 12 characters.
                                </li>
                                <li>
                                    <span class="code-line-nbr">19-23</span> : We add a <a href="#custom_validation">custom validation</a> rule. 
                                    Here, the user can't be named "<em>Stromgol</em>". If the custom rule fails, we register an error using the
                                    <code>addError(...)</code> method. A validation error includes the <code>name</code> of the invalid field, 
                                    a <code>type</code> representing the error, and an error <code>message</code>.
                                </li>
                            </ul>
                        </p>  
                    </div>   
                </p>
                <p>
                    Finally, don't forget to bind the <a href="https://github.com/google/guice/wiki/AssistedInject"><code>assisted factory</code></a> 
                    for your validator, in your custom Guice module. This is what makes possible its injection in the
                    <code>IUserService</code>:
                    <div>
                        <p>
                            <pre class="ace ace-java" data-ace-hi="12,8,12,91|13,42,13,97"
>public class AppModule extends SpincastDefaultGuiceModule {

    public AppModule(String[] mainArgs) {
        super(mainArgs);
    }

    @Override
    protected void configure() {
        super.configure();

        install(new SpincastValidationPluginGuiceModule(getRequestContextType()));

        install(new FactoryModuleBuilder().implement(IValidator.class, UserValidator.class)
                                          .build(new TypeLiteral&lt;IValidatorFactory&lt;IUser&gt;&gt;(){}));

        //...
    }

    //...
}</pre> 
                        </p>
                    </div>  
                </p>
            </section>
            
            <section id="base_methods">
            
                <h3>
                    <a class="anchor" href="#base_methods" title="permanent link"></a>
                    The base methods
                </h3>
                <p>
                    Every validator implements the <code>IValidator</code> interface which provides
                    those methods:
                </p>
                <div>
                    <p>
                        <ul class="apiList">
                        
                        
<li>
    <code class="apiItem">boolean <span>isValid</span>()</code>
    <div class="well">
        Is the object valid? Was the validation successful?

    </div>
</li>

<li>
    <code class="apiItem">void <span>revalidate</span>()</code>
    <div class="well">
        Revalidates the object (it may have been modified!). The result of the validation is cached, so it will always
        be the same except if this method is called to clear it.

    </div>
</li>

<li>
    <code class="apiItem">Map&lt;String, List&lt;IValidationError&gt;&gt; <span>getErrors</span>()</code>
    <div class="well">
        Gets the validation errors. The keys are the names of invalid fields.
    </div>
</li>

<li>
    <code class="apiItem">List&lt;IValidationError&gt; <span>getErrors</span>(String fieldName)</code>
    <div class="well">
        Gets the validation errors for the specified field.
 <p>
 </p>

    </div>
</li>

<li>
    <code class="apiItem">String <span>getErrorsFormatted</span>(FormatType formatType)</code>
    <div class="well">
        Gets the formatted errors, if there are any.

        <div class="apiItemFooter">
            @param formatType The type of output for the errors (Text, HTML, Json or XML).
<br />@return the formatted errors or <code>null</code> if
 there are no validation errors.

        </div>
    </div>
</li>

<li>
    <code class="apiItem">String <span>getErrorsFormatted</span>(String fieldName, FormatType formatType)</code>
    <div class="well">
        Gets the formatted errors for the specified field, if there are any.

        <div class="apiItemFooter">
            @param fieldName The field to get errors for.
<br />@param formatType The type of output for the errors (Text, HTML, Json or XML).
<br />@return the formatted errors or <code>null</code> if
 there are no validation errors.

        </div>
    </div>
</li>
                        
                        
                
                        </ul> 
                    </p>
                </div> 

            </section>
            
            <section id="default_validation_methods">
            
                <h3 class="noTop">
                    <a class="anchor" href="#default_validation_methods" title="permanent link"></a>
                    The default validation methods
                </h3>
                <p>
                    By extending <code>SpincastValidatorBase</code>, your validators get access to some default validation
                    methods. As we will see in the
                    next section, we can also define <a href="#custom_validation">custom validation</a> methods.
                </p>
                <p>
                    The default validation methods all return <code>false</code> if a validation error occures,
                    or <code>true</code> if the validation is successful:
                </p>
                <div>
                    <p>
                        <ul class="apiList">
                        
                        
                            <li>
                                <code class="apiItem">boolean <span>validateNotNull</span>(String fieldName, Object fieldValue)</code>
                                <div class="well">
                                    Validates that a field is not null.
                                </div>
                            </li>
                            <li>
                                <code class="apiItem">boolean <span>validateNotNull</span>(String fieldName, Object fieldValue, String errorMessage)</code>
                                <div class="well">
                                    Validates that a field is not null, and allows a custom error message.
                                </div>
                            </li>
                            
                            <li>
                                <code class="apiItem">boolean <span>validateNotBlank</span>(String fieldName, String fieldValue)</code>
                                <div class="well">
                                    Validates that a field is not blank (null, empty or contain only spaces).
                                </div>
                            </li>
                            <li>
                                <code class="apiItem">boolean <span>validateNotBlank</span>(String fieldName, String fieldValue, String errorMessage)</code>
                                <div class="well">
                                    Validates that a field is not blank (null, empty or contain only spaces), and allows a custom error message.
                                </div>
                            </li> 
                            
                            <li>
                                <code class="apiItem">boolean <span>validateMinLength</span>(String fieldName, String fieldValue, int minLength)</code>
                                <div class="well">
                                    Validates that a field has a minimum length.
                                </div>
                            </li>
                            <li>
                                <code class="apiItem">boolean <span>validateMinLength</span>(String fieldName, String fieldValue, int minLength, String errorMessage)</code>
                                <div class="well">
                                     Validates that a field has a minimum length, and allows a custom error message.
                                </div>
                            </li>
                            
                            <li>
                                <code class="apiItem">boolean <span>validateMaxLength</span>(String fieldName, String fieldValue, int maxLength)</code>
                                <div class="well">
                                    Validates that a field has a maximum length.
                                </div>
                            </li>
                            <li>
                                <code class="apiItem">boolean <span>validateMaxLength</span>(String fieldName, String fieldValue, int maxLength, String errorMessage)</code>
                                <div class="well">
                                    Validates that a field has a maximum length, and allows a custom error message.
                                </div>
                            </li>
                            
                            <li>
                                <code class="apiItem">boolean <span>validateMinSize</span>(String fieldName, Integer fieldValue, int minSize)</code>
                                <div class="well">
                                    Validates that a field has a minimum size.
                                </div>
                            </li>
                            <li>
                                <code class="apiItem">boolean <span>validateMinSize</span>(String fieldName, Integer fieldValue, int minSize, String errorMessage)</code>
                                <div class="well">
                                    Validates that a field has a minimum size, and allows a custom error message.
                                </div>
                            </li>
                            
                            <li>
                                <code class="apiItem">boolean <span>validateMaxSize</span>(String fieldName, Integer fieldValue, int maxSize)</code>
                                <div class="well">
                                    Validates that a field has a maximum size.
                                </div>
                            </li>
                            <li>
                                <code class="apiItem">boolean <span>validateMaxSize</span>(String fieldName, Integer fieldValue, int maxSize, String errorMessage)</code>
                                <div class="well">
                                    Validates that a field has a maximum size, and allows a custom error message.
                                </div>
                            </li>
                            
                            <li>
                                <code class="apiItem">boolean <span>validatePattern</span>(String fieldName, String fieldValue, String pattern)</code>
                                <div class="well">
                                    Validates that a field matches a pattern.
                                </div>
                            </li>
                            <li>
                                <code class="apiItem">boolean <span>validatePattern</span>(String fieldName, String fieldValue, String pattern, String errorMessage)</code>
                                <div class="well">
                                    Validates that a field matches a pattern, and allows a custom error message.
                                </div>
                            </li>
                            
                            <li>
                                <code class="apiItem">boolean <span>validatePattern</span>(String fieldName, String fieldValue, String pattern, boolean mustMatch)</code>
                                <div class="well">
                                    Validates that a field matches a pattern or not.
                                    <br />
                                    <div class="apiItemFooter">
                                        @param mustMatch if <code>true</code>, the field value must match the pattern, if
                                        <code>false</code>, it must <u>not</u> match it.
                                    </div>
                                </div>
                            </li>
                            <li>
                                <code class="apiItem">boolean <span>validatePattern</span>(String fieldName, String fieldValue, String pattern, boolean mustMatch)</code>
                                <div class="well">
                                    Validates that a field matches a pattern or not, and allows a custom error message.
                                    <br />
                                    <div class="apiItemFooter">
                                        @param mustMatch if <code>true</code>, the field value must match the pattern, if
                                        <code>false</code>, it must <u>not</u> match it.
                                    </div>
                                </div>
                            </li>
                            
                            <li>
                                <code class="apiItem">boolean <span>validateEmail</span>(String fieldName, String fieldValue)</code>
                                <div class="well">
                                    Validates that a field is a valid email address.
                                </div>
                            </li>
                            <li>
                                <code class="apiItem">boolean <span>validateEmail</span>(String fieldName, String fieldValue, String errorMessage)</code>
                                <div class="well">
                                    Validates that a field is a valid email address, and allows a custom error message.
                                </div>
                            </li>
                            
                        </ul> 
                    </p>
                </div> 
                <p>
                    <i class="subIcon glyphicon glyphicon-share-alt"></i>
                    In addition to those validation methods, <code>SpincastValidatorBase</code>
                    also provides methods to add your own errors when you define <a href="#custom_validation">custom validation</a> rules:
                </p>
                <div>
                    <p>
                        <ul class="apiList">
                        
                            <li>
                                <code class="apiItem">void <span>addError</span>(IValidationError error)</code>
                                <div class="well">
                                    Adds a validation error object directly.
                                </div>
                            </li>
                            <li>
                                <code class="apiItem">void <span>addError</span>(String fieldName, String errorType, String errorMessage)</code>
                                <div class="well">
                                    Adds a validation error by specifying the <code>name</code> of the validated field, the <code>type</code>
                                    of the error and its <code>message</code>.
                                </div>
                            </li>
                            <li>
                                <code class="apiItem">void <span>addErrors</span>(List&lt;IValidationError&gt; errors)</code>
                                <div class="well">
                                    Adds validation errors directly.
                                </div>
                            </li>

                        </ul> 
                    </p>
                
                </div> 
                
            </section>
            
            <section id="custom_validation">
            
                <h3 class="noTop">
                    <a class="anchor" href="#custom_validation" title="permanent link"></a>
                    Custom validation
                </h3>
                <p>
                    In addition to the default validation methods provided by the <code>SpincastValidatorBase</code>
                    base class, you can define your <em>own</em> validation rules.
                </p>
                <p>
                    A custom rules is simply a validation followed by the registration of an error,
                    if the validation fails.
                </p>
                <p>
                    For example, let's say we want to validate that a password contains at least one number. But let's 
                    also say we only want this 
                    error to be registered only if the password is not empty in the first place (which is also invalid)! 
                    In other words, we want the resulting validation of an empty password to contain
                    only one error, "<em>Can't be null, empty or only contain spaces.</em>". 
                    We don't want two errors: "<em>Can't be null, empty or only contain spaces.</em>" 
                    <u>and</u> "<em>Must contain at least one number!</em>":
                </p>
                <p>
                    <div>
                        <p>
                            <pre class="ace ace-java"
>public class UserValidator extends SpincastValidatorBase&lt;IUser&gt; {

    @AssistedInject
    public UserValidator(@Assisted IUser user,
                         IValidationErrorFactory validationErrorFactory,
                         ISpincastValidationConfig spincastBeanValidationConfig,
                         IJsonManager jsonManager,
                         IXmlManager xmlManager) {
        super(user,
              validationErrorFactory,
              spincastBeanValidationConfig,
              jsonManager,
              xmlManager);
    }

    @Override
    protected void validate() {

        // Validates that the password is not blank.
        // False is returned if the validation fails.
        boolean passwordValid = validateNotBlank("password", getObjToValidate().getPassword());
        
        // We only validate that the password contains at least one number
        // if it is not blank (if the previous validation succeeded)!
        if(passwordValid) {
            if(getObjToValidate().getPassword().matches(".*\\d+.*")) {
                passwordValid = addError("password", 
                                         "APP_USER_VALIDATION_ERROR_PASSWORD_AT_LEAST_ONE_NUMBER", 
                                         "Must contain at least one number!");
            }
        }
    }
}</pre> 
                        </p>
                        <p>
                            <span class="explanation">Explanation :</span>
                            <ul>
                                <li>
                                    <span class="code-line-nbr">21</span> : We first validate that the password
                                    is not blank. If it is blank, the validation fails and <code>false</code>
                                    is returned.
                                </li>
                                <li>
                                    <span class="code-line-nbr">25</span> : We only continue validating the password
                                    if it is not blank in the first place. Of course, we could still run the other validations and have more
                                    errors displayed to the end user: this is up to you.
                                </li>
                                <li>
                                    <span class="code-line-nbr">26</span> : Is the password is not empty, we validate 
                                    that it contains at least one number.
                                </li>
                                <li>
                                    <span class="code-line-nbr">27-29</span> : If our custom validation fails, we 
                                    register an <em>validation error</em>. A validation error is composed of a <code>field name</code>, 
                                    an <code>error type</code> and an <code>error message</code>.
                                </li>
                            </ul>
                        </p>  
                    </div>   
                </p>

            </section>
            


        </div>
    </div>
</div> 

{% endblock %}