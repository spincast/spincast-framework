{#==========================================
Spincast Cookies plugin
==========================================#}
{% extends "../../layout.html" %}

{% block sectionClasses %}plugins plugins-spincast-cookies{% endblock %}
{% block meta_title %}Plugins - Spincast Cookies{% endblock %}
{% block meta_description %}Spincast Cookies plugin provides functionalities to read and write cookies.{% endblock %}

{% block scripts %}
<script>

    {#==========================================
    Initialize the Table Of Content
    ==========================================#}
    $(function() {
        app.toc(230);
    });

</script>
{% endblock %}

{% block body %}

<div class="container pluginDoc">

    <ol class="breadcrumb">
        <li><span class="glyphicon glyphicon-menu-right"> </span> <a href="/plugins">Plugins</a></li>
        <li class="active">Spincast Cookies plugin</li>
    </ol>
    
    <div id="sectionTitle" class="row"> 
        <div class="col-xs-12">
            <a href="#top"><h2 class="shortTop shortBottom"> Spincast Cookies <span>plugin</span></h2></a>
            <div class="pluginBadges">
                <div class="pluginBadgeCore hint--top-left hint--bounce" 
                     data-hint="Core plugin included in the 'spincast-default' artifact"><span class="glyphicon glyphicon-check"></span> default</div>
                <span class="clear"></span>
            </div> 
        </div>
    </div>
    
    <div id="sectionTitleFixed" class="row"> 
        <div class="col-xs-12">
            <a href="#top"><h2 class="shortTop"><img src="/public/images/logo_xsmall.png" /> Spincast Cookies <span>plugin</span></h2></a>
        </div>
    </div>

    <div class="row">
        <nav id="toc" class="longTitle col-md-3">
            <ul class="nav nav-stacked">
                <li class="openable"><a href="#top">Overview</a></li>
                <li class="openable"><a href="#installation">Installation</a></li>
                <li class="openable">
                    <a href="#request_context_addon">The request context add-on</a>
                    <ul class="nav nav-stacked">
                        <li><a href="#request_context_example">Quick Example</a></li>
                        <li><a href="#request_context_methods">Methods</a></li> 
                    </ul>
                </li>
                <li class="openable">
                    <a href="#cookie_creation">Creating a new cookie</a>
                    <ul class="nav nav-stacked">
                        <li><a href="#cookie_creation_addon">Using the <code>add-on</code></a></li>
                        <li><a href="#cookie_creation_factory">Using the <code>ICookieFactory</code> factory</a></li>
                    </ul>
                </li>
                <li class="openable">
                    <a href="#cookie">The <code>ICookie</code> object</a>
                    <ul class="nav nav-stacked">
                        <li><a href="#cookie_methods">Methods</a></li>
                    </ul>
                </li>

            </ul>
        </nav>
        
        <div id="toc-content" class="col-md-9">
        
            <section id="overview">
            
                <h3 class="noTop">
                    <a class="anchor" href="#overview" title="permanent link"></a>
                    Overview
                </h3>
                <p>
                    The <code>Spincast Cookies</code> plugin provides functionalities
                    to read and write cookies. It mainly consists of a request context <code>add-on</code> :
                    "<a href="#request_context_addon"><code>ICookiesRequestContextAddon</code></a>", which is 
                    mounted as <code>.cookies()</code> on the default Spincast request context. 
                </p>
                <p>
                    The plugin also provides an implementation for the "<a href="#cookie"><code>ICookie</code></a>" object.
                </p>
            </section>
            
            <section id="installation">
                <h3>
                    <a class="anchor" href="#installation" title="permanent link"></a>
                    Installation
                </h3>
                <p>
                    If you use the <code>spincast-default</code> artifact, this plugin is already installed so
                    you have nothing more to do!
                </p>
                <p>
                    <i class="subIcon glyphicon glyphicon-share-alt"></i>
                    If you start from scratch using the <code>spincast-core</code> artifact, you can use the
                    plugin by adding this artifact to your project:
                    <div>
                        <p>
                            <pre class="ace ace-xml"
>&lt;dependency&gt;
    &lt;groupId&gt;org.spincast&lt;/groupId&gt;
    &lt;artifactId&gt;spincast-plugins-cookies&lt;/artifactId&gt;
    &lt;version&gt;{{spincastCurrrentVersion}}&lt;/version&gt;
&lt;/dependency&gt;</pre> 
                        </p>
                    </div>  
                </p>
                <p>
                    <i class="subIcon glyphicon glyphicon-share-alt"></i>
                    You then install the plugin's Guice module, by passing it to the <code>Guice.createInjector(...)</code> method:
                    <div>
                        <p>
                            <pre class="ace ace-java" data-ace-hi="2,8,2,71"
>Injector guice = Guice.createInjector(
        new SpincastCoreGuiceModule(args),
        new SpincastCookiesPluginGuiceModule(IAppRequestContext.class)
        // other modules...
        );</pre> 
                        </p>
                    </div>   
                </p>
                <p>
                    ... or by using the <code>install(...)</code> method from your custom Guice module:
                    <div>
                        <p>
                            <pre class="ace ace-java" data-ace-hi="5,8,5,80"
>public class AppModule extends SpincastCoreGuiceModule {

    @Override
    protected void configure() {
        super.configure();
        install(new SpincastCookiesPluginGuiceModule(getRequestContextType()));
        // other modules...
    }
    
    // ...
}</pre> 
                        </p>
                    </div>   
                </p>
            </section>
            
            <section id="request_context_addon">
                <h3>
                    <a class="anchor" href="#request_context_addon" title="permanent link"></a>
                    The request context add-on
                </h3>
                <div id="request_context_example">
                    <p>
                        <div>
                            <p>
                                <h4><i class="subIcon glyphicon glyphicon-share-alt"></i> Quick example :</h4>
                                <pre class="ace ace-java" data-ace-hi="1,30,1,40"
>public void myHandler(IAppRequestContext context) {
    ICookie myCookie = context.cookies().getCookie("myCookie");
    if(myCookie != null) {
        System.out.println(myCookie.getName() + " : " + myCookie.getValue());
    }
    //...
}</pre> 
                            </p>
                        </div>
                    </p>
                </div>

                <div id="request_context_methods">
                    <p>
                        <h4><i class="subIcon glyphicon glyphicon-share-alt"></i> Methods :</h4>
                        <ul class="apiList">
                        
                        
                        
     
<li>
    <code class="apiItem">Map&lt;String, ICookie&gt; <span>getCookies</span>()</code>
    <div class="well">
        Gets the current cookies in a Map, using their names as the keys.

    </div>
</li>

<li>
    <code class="apiItem">ICookie <span>getCookie</span>(String name)</code>
    <div class="well">
        Gets a cookie.

        <div class="apiItemFooter">
            @return the cookie or <code>null</code> if not found.

        </div>
    </div>
</li>

<li>
    <code class="apiItem">void <span>addCookie</span>(ICookie cookie)</code>
    <div class="well">
        Adds a cookie.

    </div>
</li>

<li>
    <code class="apiItem">void <span>addCookie</span>(String name, String value)</code>
    <div class="well">
        Adds a cookie using the specified name and value.

    </div>
</li>

<li>
    <code class="apiItem">void <span>addCookie</span>(String name, String value, String path, String domain, Date expires, boolean secure,                           boolean httpOnly, boolean discard, int version)</code>
    <div class="well">
        Adds a cookie, using all possible configurations.

    </div>
</li>

<li>
    <code class="apiItem">void <span>deleteCookie</span>(String name)</code>
    <div class="well">
        Deletes a cookie. In fact, this sets the cookie's <code>expires date</code> in the
 past so the user's browser will remove it.
 <code>isExpired()</code> will return <code>true</code> after you called
 this method.

    </div>
</li>

<li>
    <code class="apiItem">void <span>deleteAllCookies</span>()</code>
    <div class="well">
        Deletes all cookies. In fact, this sets their <code>expires date</code> in the
 past so the user's browser will remove them.

    </div>
</li>

<li>
    <code class="apiItem">void <span>resetCookies</span>()</code>
    <div class="well">
        Resets the current cookies to the original ones
 of the request.

    </div>
</li>



                            
                        </ul>
                    </p>
                </div>
            </section>

            <section id="cookie_creation">
            
                <h3 class="noTop">
                    <a class="anchor" href="#cookie_creation" title="permanent link"></a>
                    Creating a new cookie
                </h3>
                <div id="cookie_creation_addon">
                    <p>
                        <h4><i class="subIcon glyphicon glyphicon-share-alt"></i> Using the <code>add-on</code></h4>
                        You can create a new cookie directly from your <code>request context</code> object. This is by far the
                        easiest way to do it:
                    
                        <pre class="ace ace-java" data-ace-hi="14,25,14,83"
>public void myHandler(IAppRequestContext context) {
    context.cookies().addCookie("myCookie", "some value");
}</pre> 
                    </p>
                </div>
                <div id="cookie_creation_factory">
                    <p>
                        <h4><i class="subIcon glyphicon glyphicon-share-alt"></i> Using the <code>ICookieFactory</code> factory</h4>
                        When you don't have access to the <code>request context</code> object directly, for example if you have
                        some kind of service which creates the cookie and passes it back to your
                        <code>route handler</code>, you can use the <code>ICookieFactory</code> factory. Why a factory and not simply
                        use "<code>ICookie cookie = new Cookie()</code>"? Well, technically you can do that too. But
                        using a Guice's <a href="https://github.com/google/guice/wiki/AssistedInject">assisted factory</a> allows
                        your cookie implementation to easily have access to any dependencies it needs.
                    </p>
                    <p>
                        <div>
                            <p>
                                <pre class="ace ace-java" data-ace-hi="14,25,14,83"
>public class AppService {

    private final ICookieFactory cookieFactory;

    @Inject
    public AppService(ICookieFactory cookieFactory) {
        this.cookieFactory = cookieFactory;
    }

    protected ICookieFactory getCookieFactory() {
        return this.cookieFactory;
    }

    public ICookie someServiceMethod() {
        ICookie cookie = getCookieFactory().createCookie("myCookie", "some value");
        return cookie;
    }
}</pre> 
                            </p>
                        </div>
                    </p> 
                </div>

                <div id="cookie_factory_methods">
                    <p>
                        <h4><i class="subIcon glyphicon glyphicon-share-alt"></i> Factory methods :</h4>
                        <ul class="apiList">
                        
                        
                        
<li>
    <code class="apiItem">ICookie <span>createCookie</span>(@Assisted(&quot;name&quot;) String name)</code>
    <div class="well">
        Creates a cookie using the given name (<code>null</code> value).

    </div>
</li>

<li>
    <code class="apiItem">ICookie <span>createCookie</span>(@Assisted(&quot;name&quot;) String name,                                 @Assisted(&quot;value&quot;) String value)</code>
    <div class="well">
        Creates a cookie using the given name and value.

    </div>
</li>

<li>
    <code class="apiItem">ICookie <span>createCookie</span>(@Assisted(&quot;name&quot;) String name,                                 @Assisted(&quot;value&quot;) String value,                                 @Assisted(&quot;path&quot;) String path,                                 @Assisted(&quot;domain&quot;) String domain,                                 @Assisted(&quot;expires&quot;) Date expires,                                 @Assisted(&quot;secure&quot;) boolean secure,                                 @Assisted(&quot;httpOnly&quot;) boolean httpOnly,                                 @Assisted(&quot;discard&quot;) boolean discard,                                 @Assisted(&quot;version&quot;) int version)</code>
    <div class="well">
        Creates a cookie using all possible configurations.

    </div>
</li>


                  
 
                            
                        </ul>
                    </p>
                </div>
            </section>
            
            <section id="cookie">
            
                <h3 class="noTop">
                    <a class="anchor" href="#cookie" title="permanent link"></a>
                    The <code>ICookie</code> object
                </h3>
                <p>
                    The <code>ICookie</code> represents an HTTP cookie. This is what you get
                    when you read a cookie and what you need to provide to write one.
                </p>
                <div id="cookie_methods">
                    <p>
                        <h4><i class="subIcon glyphicon glyphicon-share-alt"></i> Methods :</h4>
                        <ul class="apiList">
                        
                        
       
<li>
    <code class="apiItem">String <span>getName</span>()</code>
    <div class="well">
        Gets the cookie name.

    </div>
</li>

<li>
    <code class="apiItem">String <span>getValue</span>()</code>
    <div class="well">
        Gets the cookie value.

    </div>
</li>

<li>
    <code class="apiItem">void <span>setValue</span>(String value)</code>
    <div class="well">
        Sets the cookie value.

    </div>
</li>

<li>
    <code class="apiItem">String <span>getPath</span>()</code>
    <div class="well">
        Gets the cookie path.

    </div>
</li>

<li>
    <code class="apiItem">void <span>setPath</span>(String path)</code>
    <div class="well">
        Sets the cookie path.

    </div>
</li>

<li>
    <code class="apiItem">String <span>getDomain</span>()</code>
    <div class="well">
        Gets the cookie domain.

    </div>
</li>

<li>
    <code class="apiItem">void <span>setDomain</span>(String domain)</code>
    <div class="well">
        Sets the cookie domain.

    </div>
</li>

<li>
    <code class="apiItem">Date <span>getExpires</span>()</code>
    <div class="well">
        Gets the date the cookie will expire at.
<br />If the date is in the past, the cookie will be deleted.
<br />If <code>null</code> the cookie will live for the current session
 (this is the default).

    </div>
</li>

<li>
    <code class="apiItem">void <span>setExpires</span>(Date expires)</code>
    <div class="well">
        Sets the date the cookie will expire.
<br />If the date is in the past, the cookie will be deleted.
<br />If <code>null</code> the cookie will live for the current session
 (this is the default).

    </div>
</li>

<li>
    <code class="apiItem">void <span>setExpiresUsingMaxAge</span>(Integer maxAge)</code>
    <div class="well">
        Sets the number of seconds for a cookie to live.
<br />If <code>maxAge</code> &lt; 0 : The "Expires date" will be in the past and the cookie will
 therefore be deleted.
<br />If <code>maxAge</code> == 0 : The "Expires date" will be <code>null</code> and the cookie will live
 for the session only.
<br />If <code>maxAge</code> &gt; 0 :  The "Expires date" will be the current date + <code>'maxAge'</code> seconds.

    </div>
</li>

<li>
    <code class="apiItem">boolean <span>isExpired</span>()</code>
    <div class="well">
        Is this cookie expired?

    </div>
</li>

<li>
    <code class="apiItem">boolean <span>isSecure</span>()</code>
    <div class="well">
        Is the "secure" feature on?

    </div>
</li>

<li>
    <code class="apiItem">void <span>setSecure</span>(boolean secure)</code>
    <div class="well">
        Sets the "secure" feature on or off.

    </div>
</li>

<li>
    <code class="apiItem">boolean <span>isHttpOnly</span>()</code>
    <div class="well">
        Is the cookie availableto the server
 and not to javascript?

    </div>
</li>

<li>
    <code class="apiItem">void <span>setHttpOnly</span>(boolean httpOnly)</code>
    <div class="well">
        Sets if the cookie is available only for to the server
 anbd not to javascript.

    </div>
</li>

<li>
    <code class="apiItem">boolean <span>isDiscard</span>()</code>
    <div class="well">
        Is this cookie to be discarded?

    </div>
</li>

<li>
    <code class="apiItem">int <span>getVersion</span>()</code>
    <div class="well">
        Gets the cookie version.

    </div>
</li>


       
                      
                      
                        </ul>
                   </p>
               </div>
            </section>

        </div>
    </div>
    
</div> 

{% endblock %}